<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http:/www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
> 
<head>
<f:metadata>
    <f:event type="preRenderView" listener="#{user.requireLoggedIn}" />
</f:metadata>
<title> Web rezervacije</title>
</head>
<body>
  <h1>Prijavljen korisnik: <h:outputLabel value="#{loginData.username}"></h:outputLabel> </h1>
  <h2>Spisak svih letova</h2>
  
  <table border="1" width="80%">
  <tr bgcolor="lightgrey"><th width="10%">Redni broj</th><th width="20%">ID leta</th><th width="20%">Vreme polaska</th><th width="20%">Vreme dolaska</th><th width="30%">Polazni aerodrom</th><th width="30%">Odrediste</th></tr>
  <h:form>
  <ui:repeat value="#{user.flights}" var="flight" varStatus="loop">
    
  		<tr><h:commandLink action="#{user.showFlight(flight)}"><td><h:outputText value="#{loop.index + 1}" /></td><td><h:outputText value="#{flight.flightId}"></h:outputText></td><td><h:outputText value="#{flight.departureTime}" /></td><td><h:outputText value="#{flight.arrivalTime}" /></td><td><h:outputText value="#{flight.source}" /></td><td><h:outputText value="#{flight.destination}" /></td>  </h:commandLink></tr>
   
  </ui:repeat>
  </h:form>   
  </table>
  <p>
  <a href="add_flight.faces">Dodaj nov let</a>
  </p>
  <p>
  <h:form>
  	<h:commandLink action="#{user.logout}">Odjava</h:commandLink>
  </h:form>
  </p>
</body>
</html>
